syntax = "proto3";
option csharp_namespace = "BlazorBoilerplate.Server";

import "Enumerations.proto";
import "google/protobuf/timestamp.proto";


message CreatePredictionRequest {
  /*
    Unique user id generated by the controller on the create new user request from the frontend. Linked to a AspNetUser saved within the MS Sql database of the frontend
    example: '4a7af128-ac3d-4e3d-89fe-b70f7bfe0c3b'
  */
  string userId = 1;
  /*  
    Unique model ids generated when inserting a new model document into MongoDB
    example: '63525870394eff35ee175bc2'
  */
  string modelId = 2;
  /*
    The file name of the uploaded live dataset located inside the upload folder
    example: "titanic_test.csv"
  */
  string liveDatasetFileName = 3;
}

message CreatePredictionResponse {
  /*
    Unique prediction id generated when inserting a new prediction document into MongoDB
    example: '63515c86b10d04d230dc1482'
  */
  string predictionId = 1;
}



message GetPredictionRequest {
  /*
    Unique user id generated by the controller on the create new user request from the frontend. Linked to a AspNetUser saved within the MS Sql database of the frontend
    example: '4a7af128-ac3d-4e3d-89fe-b70f7bfe0c3b'
  */
  string userId = 1;
  /*
    Unique prediction id generated when inserting a new prediction document into MongoDB
    example: '63515c86b10d04d230dc1482'
  */
  string PredictionId = 2;
}

message GetPredictionResponse {
  /*
    Prediction records from MongoDB (see Prediction for more detals)
    example: Prediction
  */
    Prediction Prediction = 1;
}

message GetPredictionsRequest {
  /*
    Unique user id generated by the controller on the create new user request from the frontend. Linked to a AspNetUser saved within the MS Sql database of the frontend
    example: '4a7af128-ac3d-4e3d-89fe-b70f7bfe0c3b'
  */
  string userId = 1;
  /*  
    Unique model ids generated when inserting a new model document into MongoDB
    example: '63525870394eff35ee175bc2'
  */
  string modelId = 2;
}

message GetPredictionsResponse {
  /*
    List of prediction records from MongoDB (see Prediction for more detals)
    example: [Prediction, Prediction]
  */
  repeated Prediction Predictions = 1;
}

message DeletePredictionRequest {
  /*
    Unique user id generated by the controller on the create new user request from the frontend. Linked to a AspNetUser saved within the MS Sql database of the frontend
    example: '4a7af128-ac3d-4e3d-89fe-b70f7bfe0c3b'
  */
  string userId = 1;
  /*
    Unique prediction id generated when inserting a new prediction document into MongoDB
    example: '63515c86b10d04d230dc1482'
  */
  string PredictionId = 2;
}

message DeletePredictionResponse {
  
}

message Prediction {
  /*
    Unique prediction id generated when inserting a new prediction document into MongoDB
    example: '63515c86b10d04d230dc1482'
  */
  string id = 1;
  /*  
    Unique model ids generated when inserting a new model document into MongoDB
    example: '63525870394eff35ee175bc2'
  */
  string modelId = 2;
  /*
    The path where the live dataset store is stored on disc
    example: "app/app-data/datasets/....../titanic_test.csv"
  */
  string live_dataset_path = 3;
  /*
    The path where the prediction result is storedon disc
    example: "app/app-data/datasets/../predictions/.../autokeras_xxxxx.csv"
  */
  string prediction_path = 4;
  /*
    The prediction process status (busy, completed, failed)
    example: "busy"
  */
  string status = 5;
  /*
    The prediction runtime profile object (see ModelruntimeProfile for more details)
    example: ModelruntimeProfile
  */
  PredictionRuntimeProfile runtimeProfile = 6;
}

message PredictionRuntimeProfile {
  /*
    The timestamp when the prediction process started
    example: 1666283732325
  */
  google.protobuf.Timestamp startTime = 1;
  /*
    The timestamp when the prediction process ended
    example: 1666283732325
  */
  google.protobuf.Timestamp endTime = 2;
}